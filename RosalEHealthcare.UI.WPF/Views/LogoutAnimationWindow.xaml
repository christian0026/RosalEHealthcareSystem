<Window x:Class="RosalEHealthcare.UI.WPF.Views.LogoutAnimationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="Logging Out"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Width="500"
        Height="350"
        Topmost="True">

    <Window.Resources>
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetName="MainGrid"
                             Storyboard.TargetProperty="Opacity"
                             From="0"
                             To="1"
                             Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetName="MainGrid"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="30"
                             To="0"
                             Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="WaveAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="iconLogout"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                             From="-15"
                             To="15"
                             Duration="0:0:0.6"
                             AutoReverse="True"/>
        </Storyboard>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource FadeInAnimation}"/>
            <BeginStoryboard Storyboard="{StaticResource WaveAnimation}"/>
        </EventTrigger>
    </Window.Triggers>

    <Border CornerRadius="15" Background="White" Margin="30">
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="40" ShadowDepth="0" Opacity="0.4"/>
        </Border.Effect>

        <Grid x:Name="MainGrid" Opacity="0">
            <Grid.RenderTransform>
                <TranslateTransform Y="0"/>
            </Grid.RenderTransform>

            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#2E7D32" Offset="0"/>
                        <GradientStop Color="#43A047" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <Grid.Clip>
                    <RectangleGeometry Rect="0,0,440,200" RadiusX="15" RadiusY="15"/>
                </Grid.Clip>

                <Border CornerRadius="15,15,0,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#2E7D32" Offset="0"/>
                            <GradientStop Color="#43A047" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>

                <StackPanel VerticalAlignment="Center" 
                            HorizontalAlignment="Center"
                            Margin="40,20">

                    <Grid Width="80" Height="80" Margin="0,0,0,15">
                        <Ellipse Width="80" 
                                 Height="80"
                                 Fill="White"
                                 Opacity="0.2"/>

                        <iconPacks:PackIconMaterial x:Name="iconLogout"
                                                   Kind="Logout"
                                                   Width="40"
                                                   Height="40"
                                                   Foreground="White"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   RenderTransformOrigin="0.5,0.5">
                            <iconPacks:PackIconMaterial.RenderTransform>
                                <RotateTransform Angle="0"/>
                            </iconPacks:PackIconMaterial.RenderTransform>
                        </iconPacks:PackIconMaterial>
                    </Grid>

                    <TextBlock x:Name="txtMessage"
                               Text="Logging out..."
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,8"/>

                    <TextBlock x:Name="txtSubMessage"
                               Text="Please wait while we securely close your session"
                               FontSize="13"
                               Foreground="White"
                               Opacity="0.9"
                               HorizontalAlignment="Center"
                               TextWrapping="Wrap"
                               TextAlignment="Center"
                               MaxWidth="320"/>
                </StackPanel>
            </Grid>

            <StackPanel Grid.Row="1" 
                        Margin="30,20,30,30">

                <Grid x:Name="progressIndicator" Height="4" Margin="0,0,0,15">
                    <Border Background="#E0E0E0" 
                            CornerRadius="2"/>

                    <Border x:Name="progressBar"
                            Background="#2E7D32"
                            CornerRadius="2"
                            HorizontalAlignment="Left"/>
                </Grid>

                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center">
                    <iconPacks:PackIconMaterial Kind="Account"
                                               Width="16"
                                               Height="16"
                                               Foreground="#666"
                                               VerticalAlignment="Center"
                                               Margin="0,0,8,0"/>
                    <TextBlock x:Name="txtUserName"
                               Text="User Name"
                               FontSize="12"
                               Foreground="#666"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Window>